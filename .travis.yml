language: php

php: 7.2

before_install:
- composer global require hirak/prestissimo

install:
- composer install

jobs:
  include:
  - &lint
    env:
    - LINT

    script:
    - composer run lint

  - &test-unit
    env:
    - TEST=unit

    script:
    - composer run test

  - <<: *test-unit
    php: 7.3

  - <<: *test-unit
    php: 7.4

    install:
    - composer require phpunit/phpunit 9
    - composer install