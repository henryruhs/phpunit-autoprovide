language: php

php: 7.2

install:
- composer install

jobs:
 include:
 - &lint
   env:
   - LINT

   script:
   - composer run lint

 - &test-unit
   env:
   - TEST=unit

   script:
   - composer run test

 - <<: *test-unit
   php: 7.3

 - <<: *test-unit
   php: 7.4

   before_install:
   - composer require phpunit/phpunit 9

 - <<: *test-unit
   php: nightly

   before_install:
   - composer require phpunit/phpunit 9 --ignore-platform-reqs

   install:
   - composer install --ignore-platform-reqs
